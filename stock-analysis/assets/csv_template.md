# CSV 导出模板

这是 stock-analysis 输出 CSV 的标准格式和字段说明。

## 标准列顺序

```
symbol | datetime | open | high | low | close | volume | turnover | [indicators...]
```

## 完整列说明

| 列名 | 类型 | 说明 | 示例 |
|------|------|------|------|
| `symbol` | str | 股票代码 | `700.HK` |
| `datetime` | datetime | 时间戳（ISO 8601） | `2024-01-15 00:00:00` |
| `open` | float | 开盘价 | `350.50` |
| `high` | float | 最高价 | `352.30` |
| `low` | float | 最低价 | `349.80` |
| `close` | float | 收盘价 | `351.20` |
| `volume` | int | 成交量（股数） | `50000000` |
| `turnover` | float | 成交额 | `17556000000` |

### 指标列（可选，按计算函数组织）

#### 趋势指标
| 列名 | 类型 | 周期 | 说明 |
|------|------|------|------|
| `ema_5` | float | 5 | 5 日指数移动平均 |
| `ema_10` | float | 10 | 10 日指数移动平均 |
| `ema_20` | float | 20 | 20 日指数移动平均 |
| `ema_60` | float | 60 | 60 日指数移动平均 |
| `macd` | float | - | MACD 指标线 |
| `macd_signal` | float | - | MACD 信号线 |
| `macd_hist` | float | - | MACD 柱状图（差值） |
| `adx_14` | float | 14 | ADX（趋势强度，14 周期） |
| `adx_7` | float | 7 | ADX（趋势强度，7 周期） |
| `+di_14` | float | 14 | +DI（上升方向指标，14 周期） |
| `-di_14` | float | 14 | -DI（下降方向指标，14 周期） |
| `+di_7` | float | 7 | +DI（上升方向指标，7 周期） |
| `-di_7` | float | 7 | -DI（下降方向指标，7 周期） |

#### 动量指标
| 列名 | 类型 | 周期 | 说明 |
|------|------|------|------|
| `rsi_7` | float | 7 | RSI（相对强度，7 周期） |
| `rsi_14` | float | 14 | RSI（相对强度，14 周期） |
| `cci_14` | float | 14 | CCI（商品通道，14 周期） |
| `cci_7` | float | 7 | CCI（商品通道，7 周期） |
| `stoch_k` | float | - | STOCH %K 线（KDJ 的 K） |
| `stoch_d` | float | - | STOCH %D 线（KDJ 的 D） |

#### 波动指标
| 列名 | 类型 | 周期 | 说明 |
|------|------|------|------|
| `atr_3` | float | 3 | ATR（真实波幅，3 周期） |
| `atr_14` | float | 14 | ATR（真实波幅，14 周期） |
| `bb_upper` | float | 5 | 布林带上轨 |
| `bb_middle` | float | 5 | 布林带中线 |
| `bb_lower` | float | 5 | 布林带下轨 |
| `bb_bandwidth` | float | - | 布林带宽度 |
| `bb_pct` | float | - | 布林带百分比位置（0-1） |

#### 成交量指标
| 列名 | 类型 | 说明 |
|------|------|------|
| `obv` | float | OBV（能量潮） |
| `ad` | float | A/D（积累分布） |
| `volume_sma_5` | float | 5 日成交量均线 |
| `volume_sma_10` | float | 10 日成交量均线 |
| `volume_sma_20` | float | 20 日成交量均线 |
| `vwma_5` | float | 5 日成交量加权均线 |
| `vwma_10` | float | 10 日成交量加权均线 |

#### 基础指标
| 列名 | 类型 | 周期 | 说明 |
|------|------|------|------|
| `change_1` | float | 1 | 1 日涨幅（%） |
| `change_5` | float | 5 | 5 日涨幅（%） |
| `change_10` | float | 10 | 10 日涨幅（%） |
| `change_20` | float | 20 | 20 日涨幅（%） |
| `mid_price` | float | - | 日内中间价 |

## 示例 CSV

```csv
symbol,datetime,open,high,low,close,volume,turnover,ema_5,ema_10,ema_20,ema_60,macd,macd_signal,macd_hist,rsi_7,rsi_14,atr_14,bb_upper,bb_middle,bb_lower,bb_pct,obv,ad
700.HK,2024-01-15 00:00:00,350.50,352.30,349.80,351.20,50000000,17556000000,350.85,350.42,349.95,348.50,1.2325,0.9850,0.2475,65.23,58.32,2.15,353.45,351.20,348.95,0.58,1250000000,125000
700.HK,2024-01-16 00:00:00,351.20,353.10,350.90,352.80,52000000,18456000000,351.53,350.97,350.38,348.92,1.4525,1.1450,0.3075,68.51,61.25,2.45,354.10,352.30,350.50,0.62,2150000000,145000
700.HK,2024-01-17 00:00:00,352.80,354.50,351.50,353.90,48000000,17056000000,352.71,351.84,350.90,349.35,1.6125,1.3200,0.2925,70.15,63.80,2.20,354.75,353.40,351.05,0.65,2550000000,165000
```

## 数值精度指南

| 数据类型 | 精度 | 示例 |
|--------|------|------|
| 股价 | 2-4 位小数 | `350.50`, `351.2035` |
| 成交量 | 整数 | `50000000` |
| 成交额 | 整数或 2 位小数 | `17556000000`, `175.56e8` |
| 技术指标 | 2-4 位小数 | `65.23`, `1.2325` |
| 涨幅百分比 | 2-4 位小数 | `5.23`, `-2.15` |
| 衍生指标（OBV、A/D） | 整数或 2 位小数 | `1250000000`, `125.50` |

## 编码和时区

- **编码**: UTF-8
- **时区**: UTC（或标注为当地时区，如 `2024-01-15 00:00:00+08:00`）
- **日期格式**: ISO 8601 完整格式 `YYYY-MM-DD HH:MM:SS`

## 导入其他系统的建议

| 系统 | 建议导入设置 |
|------|-----------|
| Excel | 使用"数据 → 导入"，设定编码为 UTF-8，日期识别为文本列 |
| Python/pandas | `pd.read_csv('file.csv', parse_dates=['datetime'])` |
| SQL | 导入前创建表，datetime 映射为 TIMESTAMP，float 映射为 DECIMAL(15,4) |
| TradingView | 使用 CSV 数据分析功能，确保列名对应 |
